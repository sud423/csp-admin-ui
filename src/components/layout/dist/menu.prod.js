"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _menu=_interopRequireDefault(require("ant-design-vue/es/menu")),_icon=_interopRequireDefault(require("ant-design-vue/es/icon/"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Item=_menu.default.Item,SubMenu=_menu.default.SubMenu,iconArr=["dashboard","user","form","setting","message","safety","bell","delete","code-o","poweroff","eye-o","hourglass"],_default={name:"IMenu",props:{menuData:{type:Array,required:!0},theme:{type:String,required:!1,default:"light"},mode:{type:String,required:!1,default:"inline"},collapsed:{type:Boolean,required:!1,default:!1}},data:function(){return{openKeys:[],selectedKeys:[],cachedOpenKeys:[]}},computed:{rootSubmenuKeys:function(e){var t=[];return e.menuData.forEach(function(e){t.push(e.path)}),t}},created:function(){this.updateMenu()},watch:{collapsed:function(e){e?(this.cachedOpenKeys=this.openKeys,this.openKeys=[]):this.openKeys=this.cachedOpenKeys},$route:function(){this.updateMenu()}},methods:{renderIcon:function(e,t){return"none"===t?null:e(_icon.default,{props:{type:void 0!==t?t:iconArr[Math.floor(Math.random()*iconArr.length)]}})},renderMenuItem:function(e,t,n,r){return e(Item,{key:t.path?t.path:"item_"+n+"_"+r},[e("a",{attrs:{href:"#"+t.path}},[this.renderIcon(e,t.icon),e("span",[t.meta.label])])])},renderSubMenu:function(n,e,t,r){var u=this,o=[n("span",{slot:"title"},[this.renderIcon(n,e.icon),n("span",[e.meta.label])])],s=[],i=t+"_"+r;return e.children.forEach(function(e,t){s.push(u.renderItem(n,e,i,t))}),n(SubMenu,{key:e.path?e.path:"submenu_"+t+"_"+r},o.concat(s))},renderItem:function(e,t,n,r){if(!t.invisible)return t.children?this.renderSubMenu(e,t,n,r):this.renderMenuItem(e,t,n,r)},renderMenu:function(n,e){var r=this,u=[];return e.forEach(function(e,t){u.push(r.renderItem(n,e,"0",t))}),u},onOpenChange:function(e){var t=this,n=e.find(function(e){return-1===t.openKeys.indexOf(e)});-1===this.rootSubmenuKeys.indexOf(n)?this.openKeys=e:this.openKeys=n?[n]:[]},updateMenu:function(){var e=this.$route.matched.concat();this.selectedKeys=[e.pop().path];var t=[];e.forEach(function(e){t.push(e.path)}),this.collapsed||"horizontal"===this.mode?this.cachedOpenKeys=t:this.openKeys=t}},render:function(e){var t=this;return e(_menu.default,{props:{theme:this.$props.theme,mode:this.$props.mode,openKeys:this.openKeys,selectedKeys:this.selectedKeys},on:{openChange:this.onOpenChange,select:function(e){t.selectedKeys=e.selectedKeys,t.$emit("select",e)}}},this.renderMenu(e,this.menuData))}};exports.default=_default;