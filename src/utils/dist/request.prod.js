"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_default;var _axios=_interopRequireDefault(require("axios")),_antDesignVue=require("ant-design-vue"),_store=_interopRequireDefault(require("../store")),_lazy=_interopRequireDefault(require("../router/lazy")),_jwtDecode=_interopRequireDefault(require("jwt-decode"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function print(e){var t=e.response.statusText;switch(e.response.status){case 400:var r=e.response.data;r&&!r.succ&&(t=r.msg);break;case 401:t="身份凭证已过期，请重新登录";break;case 500:t="内部服务出错";break;case 404:t="请求的链接不存在"}_antDesignVue.message.error(t).then(function(){401==e.response.status&&(_store.default.commit("account/removeuser"),_lazy.default.push("/login"))})}function _default(e){return new Promise(function(t,r){(0,_axios.default)(e).then(function(e){t(e)},function(e){r(e)}).catch(function(e){r(e)})})}_axios.default.defaults.timeout=3e4,_axios.default.defaults.baseURL=process.env.VUE_APP_BASE_API_URL,_axios.default.interceptors.request.use(function(e){var t,r=_store.default.state.account.user;return r&&r.accessToken&&(t=(0,_jwtDecode.default)(r.accessToken),r.accessToken&&t.exp>Math.round((new Date).getTime()/1e3)?e.headers.Authorization=r.tokenType+" "+r.accessToken:(_store.default.commit("account/removeuser"),_lazy.default.push("/login"))),e},function(e){return _antDesignVue.message.error("参数配置错误"),Promise.reject(e)}),_axios.default.interceptors.response.use(function(e){return e.data},function(e){return print(e),Promise.reject(e)});